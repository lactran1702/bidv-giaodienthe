$(document).ready(function(){function t(t){var e="<div class='modal-container'><div class='modal-thumb'><img src='/wps/wcm/connect/88eed3d1-50d3-42c8-842a-1c9cd77aeed9/icn-success.svg?MOD=AJPERES&cache=none' alt=''></div><div class='text-center'><p>"+t+"</p><div class='btn-group'><a href='javascript:void(0);' title='OK' class='btn btn-blue' close-modal>OK</a></div></div></div>";$(".popup-modal").html(e),$(".popup-modal").removeClass("hidden")}function e(t){var e="<div class='modal-container'><div class='modal-thumb'><img src='/wps/wcm/connect/ea384c06-d8b1-42af-a6b4-96337bb9b779/icn-warning.svg?MOD=AJPERES&cache=none' alt=''></div><div class='text-center'><p>"+t+"</p><div class='btn-group'><a href='javascript:void(0);' title='Ok' class='btn btn-white' close-modal>Ok</a></div></div></div>";$(".popup-modal").html(e),$(".popup-modal").removeClass("hidden")}function n(t,e,n){document.cookie=t+"="+e+"; expires ="+n+";path=/"}function a(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var i=n[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}function i(t,e){var c=a("cmtLiked"),o=$(t).attr("class");if(""!=i)if("liked-count"==o)n("cmtLiked",c+"-"+e,"null");else{n("cmtLiked",c.replace(e,"").replace("--","-"),"null")}else n("cmtLiked",e,"null")}function c(t,a,i){var c=new Date;c.setTime(c.getTime()+1728e5);for(var o=function(){for(var t=document.cookie.split(";"),e=[],n="",a=0;a<t.length;a++)n=t[a].split("="),e.push(n[0]);return e}(),l="cmtLike"+i,s="",m=0;m<o.length;m++){if(o[m].trim()===l){e("vn"==$(".group-languages").find(".language-checked").attr("data-lang")?"Bạn đã sử dụng chức năng này, bạn có thế sử dụng tiếp sau 24h":"You have used this function, you can use next 24h"),s="true"}if("true"==s)break}if("true"!=s){$(t).attr("class","liked-count");var r=$(".comment-list").attr("data-id"),d=Number($(t).text())+1;$(t).text(d);var p="/wps/ApplicationServices/ServletComment?command=update&comment_id="+i+"&cmd=like&content_id="+r;$.get(p,function(t){}),a>1&&n("cmtLike"+i,"0",c)}}function o(t,e,n){for(var i=$(".group-languages").find(".language-checked").attr("data-lang"),c=" ",o=0;o<t;o++){var l="";if(e[o].comment_text.length>350){for(var s=e[o].comment_text,m=350;m<s.length;m++)if(" "==s.charAt(m)){var r=m;break}l=s.slice(0,r)+"<span class='full-content'>...<a class='full-img'></a></span>"}else l=e[o].comment_text;c+="vn"==i?"<div class='comment-item'><div class=''><img src='' alt=''></div><div class='comment-content' data-id='"+e[o].id+"' data-parent='"+e[o].parent_id+"'><div class='comment-name'>"+e[o].user_name+"</div><div class='comment-body part_cmt'>"+l.replace("$num;","#").replace("$amp;","&")+"</div><div class='comment-body full_cmt' style = 'display:none'>"+e[o].comment_text+"</div><div class='comment-activities'><ul class='activities'><li><a href='javascript:void(0)' title='Thích' id='"+e[o].id+"' class='like-count' data-count = '0'>"+e[o].comment_like+"</a></li><li><a href='javascript:void(0)' title='Trả lời' class='show-comment-form'>Trả lời</a></li></ul><form class='comment-form'><textarea name='comment' id='' placeholder='Ý kiến của bạn'></textarea><button type='submut' class='btn btn-blue comment_reply_button'>Gửi</button></form></div>":"<div class='comment-item'><div class=''><img src='' alt=''></div><div class='comment-content' data-id='"+e[o].id+"' data-parent='"+e[o].parent_id+"'><div class='comment-name'>"+e[o].user_name+"</div><div class='comment-body part_cmt'>"+l.replace("$num;","#").replace("$amp;","&")+"</div><div class='comment-body full_cmt' style = 'display:none'>"+e[o].comment_text+"</div><div class='comment-activities'><ul class='activities'><li><a href='javascript:void(0)' title='Like' id='"+e[o].id+"' class='like-count' data-count = '0'>"+e[o].comment_like+"</a></li><li><a href='javascript:void(0)' title='Reply' class='show-comment-form'>Reply</a></li></ul><form class='comment-form'><textarea name='comment' id='' placeholder='Comment'></textarea><button type='submut' class='btn btn-blue comment_reply_button'>Send</button></form></div>";for(m=0;m<n.length;m++){var d=n[m].comment_text.split(":"),p="",u="";1==d.length?(p="",u=d[0]):(p=d[0],u=d[1]);var v="";if(u.length>350){for(var h=350;h<u.length;h++)if(" "==u.charAt(h)){var g=h;break}v=u.slice(0,g)+"<span class='full-content'>...<a class='full-img'></a></span>"}else v=u;e[o].id==n[m].parent_id&&(c+="vn"==i?"<div class='sub-comment'> <div class='comment-item'><div class=''><img src='' alt=''></div><div class='comment-content' data-id='"+n[m].id+"' data-parent='"+n[m].parent_id+"'><div class='comment-name'>"+n[m].user_name+"</div><div class='comment-body part_cmt'><strong>"+p+"</strong> "+v.replace("$num;","#").replace("$amp;","&")+"</div><div class='comment-body full_cmt' style = 'display:none'><strong>"+p+"</strong>"+n[m].comment_text.replace("$num;","#").replace("$amp;","&")+"</div><div class='comment-activities'><ul class='activities'><li><a href='javascript:void(0)' title='Thích' id='"+n[m].id+"' class='like-count' data-count = '0'>"+n[m].comment_like+"</a></li><li><a href='javascript:void(0)' title='Trả lời' class='show-comment-form'>Trả lời</a></li></ul><form class='comment-form'><textarea name='comment' id='' placeholder='Ý kiến của bạn'></textarea><button type='submut' class='btn btn-blue comment_reply_button'>Gửi</button></form></div></div></div></div>":"<div class='sub-comment'> <div class='comment-item'><div class=''><img src='' alt=''></div><div class='comment-content' data-id='"+n[m].id+"' data-parent='"+n[m].parent_id+"'><div class='comment-name'>"+n[m].user_name+"</div><div class='comment-body part_cmt'><strong>"+p+"</strong> "+v.replace("$num;","#").replace("$amp;","&")+"</div><div class='comment-body full_cmt' style = 'display:none'><strong>"+p+"</strong>"+n[m].comment_text.replace("$num;","#").replace("$amp;","&")+"</div><div class='comment-activities'><ul class='activities'><li><a href='javascript:void(0)' title='Like' id='"+n[m].id+"' class='like-count' data-count = '0'>"+n[m].comment_like+"</a></li><li><a href='javascript:void(0)' title='Reply' class='show-comment-form'>Reply</a></li></ul><form class='comment-form'><textarea name='comment' id='' placeholder='Comment'></textarea><button type='submut' class='btn btn-blue comment_reply_button'>Send</button></form></div></div></div></div>")}c+="</div></div>"}$(".comment-main").html(c);for(var f=$(".comment-item"),o=0;o<f.length;o++){var _=$(f[o]).find(".sub-comment");if(_.length>2)for(c="vn"==i?"<div class='comment-count view_all_reply'>Hiển thị tất cả "+_.length+" phản hồi </div>":"<div class='comment-count view_all_reply'>Show all "+_.length+" comment </div>",$(f[o]).append(c),m=2;m<_.length;m++)$(_[m]).css("display","none")}!function(){var t=a("cmtLiked");if(""!=t){$(".liked-count");for(var e=t.split("-"),n=0;n<e.length;n++)""!=e[n]&&$("#"+e[n]).attr("class","liked-count")}}()}function l(t,e){if(t.length<=5){o(t.length,t,e)}else!function(t,e,n){var a=$(".group-languages").find(".language-checked").attr("data-lang");o(5,e,n),"vn"==a?$(".view_more_comment").html("<div class='see-more' id='view_more'>Xem thêm bình luận</div>"):$(".view_more_comment").html("<div class='see-more' id='view_more'>See more</div>");$(".view_more_comment").on("click","#view_more",function(){var i=5*++t;i<e.length&&(o(i,e,n),0==$("#view_more").length&&("vn"==a?$(".view_more_comment").html("<div class='see-more' id='view_more'>Xem thêm bình luận</div>"):$(".view_more_comment").html("<div class='see-more' id='view_more'>See more</div>"))),i>=e.length&&(o(e.length,e,n),$("#view_more").remove())})}(1,t,e)}function s(t){var e="/wps/ApplicationServices/ServletComment?command="+t+"&content_id="+$("#comment-page").attr("data-id");$.getJSON(e).done(function(t){if(t.length){var e=t.length;$("#total_comment").text(e);for(var n=[],a=[],i=0;i<t.length;i++)0==t[i].parent_id?n.push(t[i]):a.push(t[i]);l(n,function(t){for(var e="",n=0;n<t.length;n++)for(j=n+1;j<t.length;j++)new Date(t[n].create_date)>=new Date(t[j].create_date)&&(e=t[n],t[n]=t[j],t[j]=e);return t}(a))}})}if($(document).on("click",".btn[close-modal]",function(){$(".popup-modal").addClass("hidden")}),$(".share-info").length&&function(t,e,n){var a,i=t.getElementsByTagName(e)[0];t.getElementById(n)||((a=t.createElement(e)).id=n,a.src="https://connect.facebook.net/vi/sdk.js#xfbml=1&version=v3.0&appId=2057449657876345&autoLogAppEvents=1",i.parentNode.insertBefore(a,i))}(document,"script","facebook-jssdk"),$(".fb-comments").length){var m=window.location.href;$(".fb-comments").attr("data-href",m)}if($(".comment-switch .select-list-items").find("._selection-field").on("click","li",function(){var t=$(this).closest(".bidv-select-box");t.addClass("has-changed"),$("._selected-text",t).removeClass("_blur dropdown").find(".select-value").html($(this).text()),$("select",t).val($(this).data("value")),$("._selection-field",t).slideUp(250);"Website"==$(this).text()?($(".facebook-comments").css("display","none"),$(".website-comments").css("display","block")):($(".website-comments").css("display","none"),$(".facebook-comments").css("display","block"))}),$(document).on("click",".like-count",function(){var t=$(this).attr("data-count"),e=$(this).attr("id");t++,$(this).attr("data-count",t),c(this,t,e),i(this,e)}),$(document).on("click",".liked-count",function(){var t=$(".comment-list").attr("data-id"),e=$(this).attr("id");$(this).attr("class","like-count");var n=Number($(this).text())-1;$(this).text(n);var a="/wps/ApplicationServices/ServletComment?command=update&comment_id="+e+"&cmd=dislike&content_id="+t;$.get(a,function(t){}),i(this,e)}),$(document).on("click",".view_all_reply",function(){var t=$(this).parent().find(".sub-comment");for(j=2;j<t.length;j++)$(t[j]).css("display","block");return $(this).text("Ẩn trả lời"),$(this).attr("class","comment-count hide_all_reply"),!1}),$(document).on("click",".hide_all_reply",function(){var t=$(this).parent().find(".sub-comment");for(j=2;j<t.length;j++)$(t[j]).css("display","none");return"vn"==$(".group-languages").find(".language-checked").attr("data-lang")?$(this).html("Hiển thị tất cả "+t.length+" phản hồi"):$(this).html("Show all "+t.length+" comment"),$(this).attr("class","comment-count view_all_reply"),!1}),$(".comment-list").length){$(".comments").on("click",".filter-list > li",function(){var t=$(this).text();if("Mới nhất"==t||"Newest"==t){s("list")}else{s("listLike")}}),$(document).on("click","#login-closed",function(t){$("#popuplogin").hide(),$(".popuplogin_bg").hide()}),$(document).on("click",".comment_reply_button",function(){var t=$(this).closest(".comment-content"),n=$(this).parent().find("textarea").val().replace("%","%25"),a=$(t).find(".comment-name").first().text(),i=$(t).closest(".comment-item").find(".comment-content").first().attr("data-parent"),c=$(t).closest(".comment-item").find(".comment-content").first().attr("data-id");if("Ý kiến của bạn"!=n&&"Comment"!=n&&""!=n)$("#popuplogin").attr("data-type","reply"),$("#popuplogin").attr("data-cmt",n),$("#popuplogin").attr("data-user",a),$("#popuplogin").attr("data-parent",i),$("#popuplogin").attr("data-id",c),$(".popuplogin_bg").show(),$("#popuplogin").show();else{e("vn"==$(".group-languages").find(".language-checked").attr("data-lang")?"Bạn phải nhập nội dung bình luận":"You must enter comment content")}return!1}),$(document).on("click",".post-comment",function(){var t=$(this).closest(".comment-content"),n=$(this).parent().find("textarea").val(),a=$(t).find(".comment-name").first().text();if("Ý kiến của bạn"!=n&&"Comment"!=n&&""!=n)$("#popuplogin").attr("data-type","post"),$("#popuplogin").attr("data-cmt",n),$("#popuplogin").attr("data-user",a),$(".popuplogin_bg").show(),$("#popuplogin").show();else{e("vn"==$(".group-languages").find(".language-checked").attr("data-lang")?"Bạn phải nhập nội dung bình luận":"You must enter comment content")}return!1}),$(document).on("click","#myvne_button_send_comment",function(n){var a="",i=($("#comment_reply_wrapper").parent(),$("#myvne_comment_email_input").val()),c=$("#myvne_comment_fullname_input").val(),o=$(".group-languages").find(".language-checked").attr("data-lang");if(""==i||null==i?a+="vn"==o?"Hãy nhập email của bạn. ":"Please enter your email. ":function(t){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t)}(i)||(a+="vn"==o?"Email của bạn nhập không đúng. ":"Your email is incorrect. "),""!=c&&null!=c||(a+="vn"==o?"Hãy nhập tên của bạn. ":"Please enter your name. "),""==a||null==a){var l=$("#popuplogin").attr("data-type"),s=$(".comment-list").attr("data-id"),m=$(".comment-list").attr("data-site"),r=$(".banner").find(".title-1").text().replace("%","%25");if("reply"==l){var d=$("#popuplogin").attr("data-cmt"),p=$("#popuplogin").attr("data-user"),u=$("#popuplogin").attr("data-parent"),v=$("#popuplogin").attr("data-id"),h="",g="";0==u?(h=v,g=d.replace(/\n/g,"<br>").replace("#","$num;").replace("&","$amp;")):(h=u,g=p+":"+d.replace(/\n/g,"<br>").replace("#","$num;").replace("&","$amp;"));if("vn"==(o=$(".group-languages").find(".language-checked").attr("data-lang")))f="VI";else f="EN";_="/wps/ApplicationServices/ServletComment?command=insert&parent_id="+h+"&comment_text="+g+"&user_name="+c+"&email="+i+"&content_id="+s+"&content_name="+r+"&siteareaId="+m+"&pageLanguage="+f;$.get(_,function(n){var a=$(".group-languages").find(".language-checked").attr("data-lang");1==n||"true"==n?t("vn"==a?"Bình luận của bạn đã được gửi thành công, bình luận đang được chờ phê duyệt.":"Your comment has been successfully submitted, comments are awaiting approval."):e("vn"==a?"Xảy ra lỗi, hãy bình luận sau.":"Error occurred, please comment later.")})}else{d=(d=$("#popuplogin").attr("data-cmt")).replace(/\n/g,"<br>").replace("#","$num;").replace("&","$amp;");p=$("#popuplogin").attr("data-user");if("vn"==(o=$(".group-languages").find(".language-checked").attr("data-lang")))f="VI";else var f="EN";var _="/wps/ApplicationServices/ServletComment?command=insert&parent_id=0&comment_text="+d+"&user_name="+c+"&email="+i+"&content_id="+s+"&content_name="+r+"&siteareaId="+m+"&pageLanguage="+f;$.get(_,function(n){var a=$(".group-languages").find(".language-checked").attr("data-lang");1==n||"true"==n?t("vn"==a?"Bình luận của bạn đã được gửi thành công, bình luận đang được chờ phê duyệt.":"Your comment has been successfully submitted, comments are awaiting approval."):e("vn"==a?"Xảy ra lỗi, hãy bình luận sau.":"Error occurred, please comment later.")})}$("#popuplogin").hide(),$(".popuplogin_bg").hide(),$("textarea").val("")}else e(a);$("#myvne_comment_email_input").val(""),$("#myvne_comment_fullname_input").val("")});return $(".comment-switch").length&&($(".comment-type.active").slideDown(500),$(".comment-switch select").change(function(){""!=$(this).val()&&($(".comment-type").removeClass("active"),$($(this).val()).addClass("active"),$(".comment-type:not(.active)").slideUp(500),$(".comment-type.active").slideDown(500))}).trigger("change")),$(document).on("click",".show-comment-form",function(){var t=$(this).closest(".comment-activities").find(".comment-form");return t.toggleClass("show-form"),t.hasClass("show-form")?t.slideDown():t.slideUp(),!1}),$(document).on("click",".full-img",function(){$(this).closest(".comment-content").find(".part_cmt").first().css("display","none"),$(this).closest(".comment-content").find(".full_cmt").first().css("display","block")}),s("list"),void window.location.href}});